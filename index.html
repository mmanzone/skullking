<!DOCTYPE html>
<html lang="fr">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Game Score Tracker</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link
        href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&family=Pirata+One&family=Bangers&family=Press+Start+2P&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        :root {
            --bg-color: #2d5a27;
            /* Green Felt */
            --text-color: #f0f0f0;
            --card-bg: #e8f5e9;
            /* Light cream/greenish paper for cards */
            --card-text: #1b3a1b;
            --accent-color: #d4af37;
        }

        * {
            box-sizing: border-box;
        }

        body {
            font-family: 'Roboto', sans-serif;
            background-color: var(--bg-color);
            background-image: url("data:image/svg+xml,%3Csvg width='6' height='6' viewBox='0 0 6 6' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='%2335662f' fill-opacity='0.4' fill-rule='evenodd'%3E%3Cpath d='M5 0h1L0 6V5zM6 5v1H5z'/%3E%3C/g%3E%3C/svg%3E");
            color: var(--text-color);
            margin: 0;
            padding: 20px;
            display: flex;
            flex-direction: column;
            align-items: center;
            min-height: 100vh;
        }

        .top-controls {
            position: absolute;
            top: 20px;
            right: 20px;
            display: flex;
            gap: 10px;
        }

        .icon-btn {
            background: #1b3a1b;
            border: 1px solid #4a8c4a;
            color: #fff;
            padding: 8px 12px;
            cursor: pointer;
            border-radius: 4px;
            font-size: 1.2rem;
            transition: background 0.2s;
        }

        .icon-btn:hover {
            background: #2d5a27;
        }

        h1 {
            color: #fff;
            margin-bottom: 40px;
            text-align: center;
            margin-top: 60px;
            font-family: 'Bangers', cursive;
            font-size: 3rem;
            text-shadow: 2px 2px 0 #1b3a1b;
            letter-spacing: 2px;
        }

        .game-grid {
            display: grid;
            grid-template-columns: repeat(2, minmax(150px, 220px));
            /* Max 2 cols, reduced max-width (~280 -> 220) */
            gap: 20px;
            width: 100%;
            justify-content: center;
            /* Center the grid */
            max-width: 600px;
            /* Constrain container */
        }

        .game-card {
            background: transparent;
            border: 4px solid #fff;
            border-radius: 12px;
            padding: 0;
            text-decoration: none;
            transition: transform 0.1s, box-shadow 0.2s;
            display: flex;
            justify-content: center;
            align-items: center;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.3);
            position: relative;
            /* Card Look */
            aspect-ratio: 3/4;
            overflow: hidden;
        }

        .game-card img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            display: block;
        }

        .game-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.4);
        }

        .game-card.clicking {
            transform: scale(0.95) !important;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.5) !important;
        }

        /* Titles are now part of the image or hidden, user requested images as links */
        /* If we want tiles we can overlay them, but user said "Use the respective images as links" */

        /* ... existing specific styles can remain or be removed if unused ... */
        /* Keeping them safe but they might not apply to img structure */
        .card-skullking {
            border-color: #d4af37;
        }

        .card-papayoo {
            border-color: #9b59b6;
        }

        .card-dutch {
            border-color: #e74c3c;
        }

        .card-generic {
            border-color: #2980b9;
        }

        .footer {
            margin-top: auto;
            color: rgba(255, 255, 255, 0.7);
            font-size: 0.9rem;
            padding-top: 40px;
            text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.5);
        }

        /* Modal */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            z-index: 100;
            justify-content: center;
            align-items: center;
        }

        .modal.visible {
            display: flex;
        }

        .modal-content {
            background: #fff;
            color: #333;
            padding: 20px;
            border-radius: 8px;
            width: 90%;
            max-width: 400px;
            text-align: center;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.5);
        }

        .settings-row {
            margin: 20px 0;
            display: flex;
            flex-direction: column;
            gap: 10px;
            align-items: center;
        }

        select,
        button.btn-danger {
            padding: 10px;
            font-size: 1rem;
            border-radius: 4px;
            cursor: pointer;
        }

        select {
            border: 1px solid #ccc;
            width: 100%;
        }

        .btn-danger {
            background: #e74c3c;
            color: white;
            border: none;
            width: 100%;
        }

        .btn-close {
            background: #333;
            color: #fff;
            border: none;
            padding: 10px 20px;
            border-radius: 4px;
            cursor: pointer;
            margin-top: 10px;
        }
    </style>
</head>

<body>

    <div class="top-controls">
        <button class="icon-btn" onclick="toggleLang()" id="btn-lang" title="Switch Language">ðŸ‡¬ðŸ‡§</button>
        <button class="icon-btn" onclick="openSettings()" title="Settings"><i class="fas fa-cog"></i></button>
    </div>

    <h1 id="main-title">Score Tracker</h1>

    <div class="game-grid">
        <a href="skullking/index.html" class="game-card card-skullking">
            <img src="skullking.png" alt="Skull King">
        </a>

        <a href="papayoo/index.html" class="game-card card-papayoo">
            <img src="papayoo.png" alt="Papayoo">
        </a>

        <a href="dutch/index.html" class="game-card card-dutch">
            <img src="dutch.png" alt="Dutch">
        </a>

        <a href="generic/index.html" class="game-card card-generic">
            <img src="generic.png" alt="Generic Game">
        </a>
    </div>

    <div class="footer" data-i18n="footer">
        Fait maison pour les vacances
    </div>

    <!-- Audio Preload -->
    <audio id="sfx-skull" src="skull.mp3"></audio>
    <audio id="sfx-papayoo" src="papayou.mp3"></audio>
    <audio id="sfx-dutch" src="dutch.mp3"></audio>

    <!-- Settings Modal -->
    <div id="settings-modal" class="modal">
        <div class="modal-content">
            <h2 data-i18n="settings">ParamÃ¨tres</h2>

            <div class="settings-row">
                <label data-i18n="def_lang">Langue par dÃ©faut</label>
                <select id="default-lang-select" onchange="setDefaultLang(this.value)">
                    <option value="fr">FranÃ§ais</option>
                    <option value="en">English</option>
                </select>
            </div>

            <div class="settings-row">
                <button class="btn-danger" onclick="clearPlayerHistory()" data-i18n="clear_hist">Effacer Historique
                    Joueurs</button>
            </div>

            <button class="btn-close" onclick="closeSettings()" data-i18n="close">Fermer</button>
        </div>
    </div>

    <script>
        const I18N = {
            fr: {
                title: "SoirÃ©e Jeux",
                footer: "Fait maison pour les vacances",
                settings: "ParamÃ¨tres",
                def_lang: "Langue par dÃ©faut",
                clear_hist: "Effacer Historique Joueurs",
                close: "Fermer",
                cleared: "Historique effacÃ© !"
            },
            en: {
                title: "Game Night",
                footer: "Home made for the holidays",
                settings: "Settings",
                def_lang: "Default Language",
                clear_hist: "Clear Player History",
                close: "Close",
                cleared: "History cleared!"
            }
        };

        const STORAGE_KEY = 'Common_Settings';
        let settings = JSON.parse(localStorage.getItem(STORAGE_KEY) || '{"defaultLang":"fr"}');
        let curLang = settings.defaultLang;

        function init() {
            // Apply language
            setLang(curLang);
            document.getElementById('default-lang-select').value = settings.defaultLang;

            // Setup Audio Click Listeners
            setupAudioLink('skullking/index.html', 'sfx-skull');
            setupAudioLink('papayoo/index.html', 'sfx-papayoo');
            setupAudioLink('dutch/index.html', 'sfx-dutch');
            setupAudioLink('generic/index.html', null); // No sound
        }

        function setupAudioLink(href, audioId) {
            // Find link with this href to attach listener
            // (Selectors are slightly tricky since href might be absolute vs relative, but 'a[href$="..."]' works)
            let link = document.querySelector(`a[href="${href}"]`);
            if (link) {
                link.addEventListener('click', function (e) {
                    e.preventDefault();

                    // Animation
                    link.classList.add('clicking');

                    const audio = document.getElementById(audioId);
                    if (audio) {
                        const playPromise = audio.play();

                        // Handle potential play errors (e.g. user interacting requirements, blocked autoplay)
                        if (playPromise !== undefined) {
                            playPromise.catch(error => {
                                console.log('Audio playback prevented:', error);
                                // If audio fails, just navigate immediately
                                window.location.href = href;
                            });
                        }

                        // Wait for sound/anim
                        setTimeout(() => {
                            window.location.href = href;
                        }, 500); // 500ms delay for effect
                    } else {
                        window.location.href = href;
                    }
                });
            }
        }

        function setLang(lang) {
            curLang = lang;
            document.getElementById('btn-lang').innerText = curLang === 'fr' ? 'ðŸ‡¬ðŸ‡§' : 'ðŸ‡«ðŸ‡·';

            document.getElementById('main-title').innerText = I18N[curLang].title;
            document.querySelectorAll('[data-i18n]').forEach(el => {
                const key = el.getAttribute('data-i18n');
                if (I18N[curLang][key]) el.innerText = I18N[curLang][key];
            });
        }

        function toggleLang() {
            setLang(curLang === 'fr' ? 'en' : 'fr');
        }

        function openSettings() {
            document.getElementById('settings-modal').classList.add('visible');
        }
        function closeSettings() {
            document.getElementById('settings-modal').classList.remove('visible');
        }

        function setDefaultLang(val) {
            settings.defaultLang = val;
            localStorage.setItem(STORAGE_KEY, JSON.stringify(settings));
        }

        function clearPlayerHistory() {
            const SHARED_HISTORY_KEY = 'skullKing_Names';
            localStorage.removeItem(SHARED_HISTORY_KEY);
            alert(I18N[curLang].cleared);
        }

        window.onload = init;
    </script>
</body>

</html>